 .PAGE 'ROMTBL'; ; VARIOUS DATA TABLESDIRTRK .BYTE 18 ; DIRECTORY TRACK #BAMSIZ .BYTE 4 ; BYTES PER TRACK FOR THE BAMMAPOFF .BYTE 4 ; OFFSET OF BAM IN SECTORDSKNAM .BYTE $90 ; OFFSET OF DISK NAME IN BAM SECTOR;; COMMAND SEARCH TABLECMDTBL .BYTE 'V' .BYTE 'I' .BYTE 'D' .BYTE 'M' .BYTE 'B' .BYTE 'U' .BYTE 'P' .BYTE '&' .BYTE 'C' .BYTE 'R' .BYTE 'S' .BYTE 'N'; VALIDATE-DIR INIT-DRIVE DUPLICATE; MEMORY-OP BLOCK-OP USER; POSITION DSKCPY UTLODR RENAME SCRATCH NEWNCMDS =*-CMDTBL; JUMP TABLE LOWCJUMPL .BYTE <VERDIR .BYTE <INTDRV .BYTE <DUPLCT .BYTE <MEM .BYTE <BLOCK .BYTE <USER .BYTE <RECORD .BYTE <UTLODR .BYTE <DSKCPY .BYTE <RENAME .BYTE <SCRTCH .BYTE <NEW *=CJUMPL+NCMDS; JUMP TABLE HIGHCJUMPH .BYTE >VERDIR .BYTE >INTDRV .BYTE >DUPLCT .BYTE >MEM .BYTE >BLOCK .BYTE >USER .BYTE >RECORD .BYTE >UTLODR .BYTE >DSKCPY .BYTE >RENAME .BYTE >SCRTCH .BYTE >NEW *=CJUMPH+NCMDSVAL=0 ; VALIDATE (VERIFY) CMD #; COMMAND BIT MASKSPCMD =9 .BYTE %01010001 ; DSKCPY (!)STRUCT =*-PCMD ; CMDS NOT PARSED .BYTE %11011101 ; RENAME .BYTE %00011100 ; SCRATCH .BYTE %10011110 ; NEWLDCMD =*-STRUCT ; LOAD CMD IMAGE .BYTE %00011100 ; LOAD; --- ---; PGDRPGDR; FS1 FS2 .SKIP 1; BIT REPS: NOT PATTERN; NOT GREATER THAN ONE FILE; NOT DEFAULT DRIVE(S); REQUIRED FILENAME .SKIP 1MODLST .BYTE 'R' ;READ .BYTE 'W' ;WRITE .BYTE 'A' ;APPEND .BYTE 'M' ;MODIFYNMODES =*-MODLST;FILE TYPE TABLETPLST .BYTE 'D' ;DEL .BYTE 'S' ;SEQ .BYTE 'P' ;PRG .BYTE 'U' ;USR .BYTE 'L' ;REL; NAME OF FILE TYPES FOR DIRECTORY, 1ST LETTERSTYPLST .BYTE 'D' .BYTE 'S' .BYTE 'P' .BYTE 'U' .BYTE 'R'NTYPES =*-TYPLST; NAME OF FILE TYPES FOR DIRECTORY, 2ND LETTERSTP1LST .BYTE 'E' .BYTE 'E' .BYTE 'R' .BYTE 'S' .BYTE 'E'; NAME OF FILE TYPES FOR DIRECTORY, 3RD LETTERSTP2LST .BYTE 'L' .BYTE 'Q' .BYTE 'G' ;PRG .BYTE 'R' .BYTE 'L'; LED MASKSLEDMSK .BYTE LED0 ;DRIVE 0 .BYTE LED1 ;DRIVE 1 (NOT PRESENT);; ERROR FLAG VARS FOR BIT;ER00 .BYTE 0ER0 .BYTE $3FER1 .BYTE $7FER2 .BYTE $BFER3 .BYTE $FF;; TABLE: SECTORS PER TRACKNUMSEC ;(4) SECTORS/TRACK .BYTE 17 ; TRACKS 31-35 .BYTE 18 ;TRACKS 25-30 .BYTE 19 ;TRACKS 18-24 .BYTE 21 ;TRACKS 01-17; DOS VERSION IDENTIFIERVERNUM .BYTE FM4040 ; FORMAT TYPE; NUMBER OF TRACK ZONESNZONES .BYTE 4 ; # OF ZONESMAXTRK ; MAXIMUM TRACK # +1; TABLE: FIRST TRACK# OF NEXT ZONETRKNUM .BYTE 36 .BYTE 31 .BYTE 25 .BYTE 18; TABLE: BYTE SEQUENCES FOR HALF TRACK STEPSOFFSET ; FOR RECOVERY .BYTE $01 ;HALF A TRACK INWARD .BYTE $FF ;HALF A TRACK OUTWARD .BYTE $FF .BYTE $01 .BYTE $00 ;END OF TABLE?;BUFIND .BYTE $03 .BYTE $04 .BYTE $05 .BYTE $06 .BYTE $07 .BYTE $07; .SKIP 1;.END