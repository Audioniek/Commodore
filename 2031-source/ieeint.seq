 .PAGE 'IEEINT'LE77F LDA PB ; GET BUS STATUS ORA #DAV ; SET DAV TRUE STA PB ; ON BUS LDA DDRB1 ; SET ALL BUS LINES TO OUTPUT AND #$FF-DAV ; EXCEPT DAV STA DDRB1 ; AND RTS ; EXIT; INITIALIZE THE IEEE BUS;BOOT LDA PA1 ; IF DATA ON BUS BNE LE77F ; SET DAV TO INPUT LDA DDRB1 ; SET DAV VIA PIN ORA #$40 ; TO INPUT STA DDRB1 LDA PB ; GET BUS STATUS LINES ORA #DAV ; FLOAT DAV LINE STA PB ; ON BUS LDA PB ; GET BUS LINE STATUS AND #NRFD ; IF NRFD BEQ LE77F ; TRUE, GO LDA PB ; ELSE AND #$FF-DAV ; SET DAV STA PB ; FALSE LDA PB ; GET BUS LINE STATUS AND #NRFD ; IF NRFD BNE LE77F ; TRUE, LOOPLE7BB LDA PA1 ; GET BUS DATA BEQ LE7BB ; IF NONE, WAIT FOR SOME INC F2CNT INC CMDSIZ LDA #$2A STA CMDBUF JSR LE77F ; FLOAT DAV LINE JMP BOOT4 ; AND BOOT CODE VIA UTLODR;; .END